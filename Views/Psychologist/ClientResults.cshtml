@{
    ViewData["Title"] = "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞";
    var client = ViewBag.Client as Sofia.Web.Models.User;
    var psychologist = ViewBag.Psychologist as Sofia.Web.Models.Psychologist;
    var results = Model as List<Sofia.Web.Models.TestResult> ?? new List<Sofia.Web.Models.TestResult>();
}

<div class="d-flex justify-content-between align-items-center mb-4">
    <h2>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤: @(client?.Username ?? "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π")</h2>
    <div>
        <a href="/psychologist/dashboard/@(psychologist?.Id ?? 0)" class="btn btn-outline-secondary">‚Üê –ù–∞–∑–∞–¥ –∫ –¥–∞—à–±–æ—Ä–¥—É</a>
        <a href="/psychologist/client/@(client?.Id ?? 0)/results/csv" class="btn btn-outline-success ms-2">‚¨á –≠–∫—Å–ø–æ—Ä—Ç CSV</a>
    </div>
</div>

<div class="card">
    <div class="card-body">
        @if (!results.Any())
        {
            <p class="text-muted">–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–µ—Å—Ç–æ–≤ —É —ç—Ç–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞.</p>
        }
        else
        {
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>–î–∞—Ç–∞</th>
                        <th>–¢–µ—Å—Ç</th>
                        <th>–ë–∞–ª–ª—ã</th>
                        <th>–£—Ä–æ–≤–µ–Ω—å</th>
                        <th>–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var r in results)
                    {
                        <tr>
                            <td>@r.TakenAt.ToString("dd.MM.yyyy HH:mm")</td>
                            <td>@r.Test?.Name</td>
                            <td>@r.Score</td>
                            <td>@r.Level</td>
                            <td>@r.Interpretation</td>
                        </tr>
                    }
                </tbody>
            </table>
        }
    </div>
</div>